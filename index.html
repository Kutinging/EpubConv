<?php session_start();?>
<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<?php
	echo $Messages = @$_POST['Messages'];
?>
<html>
	<head>
		<title>EPubConv EPub簡轉繁</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="Shortcut Icon" type="image/x-icon" href="images/epub.ico" />
		<meta name="google-site-verification" content="16NF_iuEtml79Km7u1uUcdvPydNDOVLG_YSkh8D-HII" />
		<meta name="description" content="EPubConv 免費將 EPUB 電子書中的內容由簡體中文轉為繁體中文" />
		<meta property="og:description" content="免費將 EPUB 電子書中的內容由簡體中文轉為繁體中文" />
		<meta property="og:title" content="EPubConv" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://epubconv.kawai.moe" />
		<meta property="og:image" content="https://epubconv.kawai.moe/images/epub.png" />
		<meta property="og:site_name" content="EPubConv" />
		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="assets/js/layer.js"></script>
		
	</head>
	<body onload="HiddenButton();">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="logo">
							<span class="icon fa-book"></span>
						</div>
						<div class="content">
							<div class="inner">
								<h1><a href='/'>EPubConv</a></h1>
								<p><font size='4em'>免費將簡體中文的EPub電子書轉換成繁體中文</font></p>
							</div>
						</div>
						<nav>
							<ul>
								<li><a href="#howto"><font size='3em'>如何運作</font></a></li>
								<li><a href="#upload"><font size='3em'>檔案上傳</font></a></li>
								<li><a href="#about"><font size='3em'>關於網站</font></a></li>
								<li><a href="#contact"><font size='3em'>聯絡我</font></a></li>
								<!--<li><a href="#elements">Elements</a></li>-->
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- howto -->
							<article id="howto">
								<h2 class="major">如何運作</h2>
								<span class="image main"><img src="images/epub.png" alt="" /></span>
								<p>
									<font size='4em'>
									簡單3步驟
								<ul>
									<li>1.選擇檔案上傳</li>
									<li>2.等待系統轉換</li>
									<li>3.下載檔案</li>
								</ul>			
									上傳檔案並等待系統轉換完成後自動跳轉至下載頁面，下載下來的EPub就是繁體中文啦～		
									</font>
								</p>
							</article>

						<!-- upload -->
							<article id="upload_test">
								<h2 class="major">檔案上傳</h2>
								<span class="image main"></span>
								<p>正在重新建置中</p>
							</article>
							
							<article id="upload">
								<h2 class="major">檔案上傳</h2>
								<span class="image main"></span>
								
								<?php
									if($Messages=="TypeError"){
										echo "<h2><font color='red'> 檔案格式錯誤 </font><h2>";
									}
								?>
								<form method="post" action="module/upload.php" enctype="multipart/form-data">
									<div class="field">
										<label for="message"><font size='4em'>檔案名稱(最大10M):</font></label>
										<input type="file" name="EPubFile" id="EPubFile" />
									</div>
									<ul class="actions">
										<div id="recaptcha">
											<form name="recaptcha" action="index.php" method="POST" onsubmit="return(get_action())">
											  <div class="g-recaptcha" data-sitekey="6LcceVIUAAAAAEQpFGKXb-ET4zoqfFR58g0hs9v7" data-theme="light" data-size="normal"></div>
											  <br/>
											</form>
										</div>
										<div id="Button">
											<li>
												<button type=\"submit\" id="submit" name="submit" class="special" >上傳</button>
											</li>
											<li>
												<button type="reset" id="reset" name="reset" >重置</button>
											</li>
										</div>
									</ul>
								</form>
								<p>
									<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
									<!-- epubconv.kawai.moe#upload -->
									<ins class="adsbygoogle"
										 style="display:block"
										 data-ad-client="ca-pub-5441808858903508"
										 data-ad-slot="2282170675"
										 data-ad-format="auto"></ins>
									<script>
									(adsbygoogle = window.adsbygoogle || []).push({});
									</script>
								</p>
							</article>

						<!-- About -->
							<article id="about">
								<h2 class="major">關於此網站</h2>
								<span class="image main"></span>
								<p>此網頁由<a href='https://kttsite.com' target='_blank'>古丁丁</a>所架設而成，架這個服務的原因是在Github上看到<a href='https://github.com/yen3/convert2tex' target='_blank'> yen3 大大的 convert2tex 專案</a> 再加上很久以前自己也很常用的網站(http://epubconv.mobi/)所以才動手寫這個網頁，當然整個服務都是免費的，如果有BUG還請各位多多告知我囉，等到網站完整沒什麼問題應該就會放在我的 Github 上公開囉，希望大家喜歡｡:.ﾟヽ(*´∀`)ﾉﾟ.:｡</p>
								
								<h2 class="major">網頁更新</h2>
								<span class="image main"></span>
								<p>2018/04/23 - 更改為第二版本網頁完成，歡迎回報BUG
									<ul>
										<li>重新編寫翻譯腳本，直接使用<a href="https://github.com/BYVoid/OpenCC" target='_blank'>OpenCC</a>及7ZIP加快翻譯速度</li>
										<li>修正翻譯後無法下載問題</li>
										<li>修正無法上傳epub檔之問題</li>
										<li>添加機器人驗證</li>
										<li>重新加入單檔最大10M之限制</li>
									</ul>
								</p>
								<p>2017/07/28 - 更新Email網址，修復yahoo無法寄送到的問題
								<p>2017/05/05 - 網站重新建置完成，重新開放，修正以下BUG
									<ul>
										<li>檔案名稱編碼轉換</li>
									</ul>
								</p>
								<p>2017/05/04 - 站主腦抽導致網頁資料全部一去不回，正努力重新建置！_(:3 」∠ )_</p>
								<p>2017/04/18 - 修正以下網頁BUG
									<ul>
										<li>上傳文件10M限制問題</li>
										<li>ASCII轉碼問題修正</li>
									</ul>
								</p>
								<p>2017/04/17 - 網頁正式運作</p>
								<p>2017/04/16 - 網頁架構放置完成</p>
								
								<h2 class="major">感謝</h2>
								<span class="image main"></span>
								<p>convert2tex by yen3</p>
								<p>Set up by Kutinging.</p>
								<p>Powered by Google Cloud Platform.</p>
								<p>OpenCC by BYVoid.</p>
								<p>7zip by Igor Pavlov.</p>
								<p>DESIGN: HTML5 UP</p>
							</article>

						<!-- Contact -->
							<article id="contact">
								<h2 class="major">聯絡我</h2>
								
								<ul class="icons">
									<p><li><a href="#contact" class="icon fa-envelope"><span class="label">Email</span></a>　epubconv@mail.kawai.moe</li></p>
									<p><li><a href="https://twitter.com/ThanatosDi_" target="_blank" class="icon fa-twitter"><span class="label">Twitter</span></a>　https://twitter.com/ThanatosDi_</li></p>
									
									<p><li><a href="#contact" target="_blank" class="icon fa-facebook"><span class="label">Facebook</span></a>　N/A</li></p>
									
									<p><li><a href="#contact" target="_blank" class="icon fa-instagram"><span class="label">Instagram</span></a>　N/A</li></p>
									
									<p><li><a href="https://github.com/Kutinging/EpubConv" target="_blank" class="icon fa-github"><span class="label">GitHub</span></a>　https://github.com/Kutinging/EpubConv</li></p>
								</ul>
								<p>
									<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
									<!-- epubconv.kawai.moe#contact -->
									<ins class="adsbygoogle"
										 style="display:block"
										 data-ad-client="ca-pub-5441808858903508"
										 data-ad-slot="6631645070"
										 data-ad-format="auto"></ins>
									<script>
									(adsbygoogle = window.adsbygoogle || []).push({});
									</script>
								</p>
							</article>
							
						<!-- DownloadFile -->
							<article id="StartDownload">
								<h2 class="major">檔案下載</h2>
								<span class="image main"></span>
								<?php
									if($Messages=="FileNotFound"){
										$DownloadUrl =  "檔案不存在 <a href='./#upload'>重新上傳 epub 電子書</a>";
									}else{
										$EPubDownloadName = @$_GET['f'];
										if(@$EPubDownloadName!=null && file_exists("epubfiles/{$EPubDownloadName}")){
											$DownloadUrl = "<a href=module/DownloadFile.php?f={$EPubDownloadName}>點擊下載　{$EPubDownloadName}</a>";
										}else{
											$DownloadUrl = '取得連結失敗，已超過下載次數';
										}
									}
								?>
								<p><?php echo $DownloadUrl;?></p>
								<p>
									<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
									<!-- epubconv.kawai.moe#dl -->
									<ins class="adsbygoogle"
										 style="display:block"
										 data-ad-client="ca-pub-5441808858903508"
										 data-ad-slot="6880493870"
										 data-ad-format="auto"></ins>
									<script>
									(adsbygoogle = window.adsbygoogle || []).push({});
									</script>
								</p>
							</article>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; EPubConv. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			    <script src="//www.google.com/recaptcha/api.js" async defer></script>
				<script language="javascript" type="text/javascript">
					function HiddenButton(){
						document.all["Button"].style.display="none";
						$('.g-recaptcha').show();
					}
					function VerifyReCaptcha(GResponse)
					{
						$.ajax(
						{
							url:"module/VerifyReCaptcha.php",//傳送到後端的網頁名稱
							type : "POST",
							dataType: 'html',
							async: true,
							data:
							{
								reCaptchaResponse: GResponse
							},
							success:function(msg)
							{
								switch(msg)
								{
									case 'OK':
										//在這裡輸入驗證成功後要呼叫的函數
										//在本範例中預設是讓 reCaptcha 驗證碼淡出
										$('.g-recaptcha').fadeOut();
										document.all["Button"].style.display="inline";
									break;
									case 'ERROR':
										alert('驗證失敗！請再試一次！');
									break;
								}
							},
							error:function(xhr){
								alert('發生未預期的錯誤！請再試一次！');
							},
						}
						);
					}
					
					$('#submit').on('click', function(){
						layer.load(1,{
							time: 0,
							shade:[0.5,'#fff']
						});
						layer.msg('上傳中&轉換中~請稍候~',{
							time: 0,
							offset: '55%'
						});
					});   
					$('#reset').on('click', function(){
						layer.msg('清空上傳的檔案囉~選擇其他檔案上傳吧~',{
							time: 1500,
							shade:[0.5,'#fff']
						});
					});
					

				</script>
				
				
				<script language="javascript" type="text/javascript" >
					$(document).ready(function(){	
						var IntervalID = setInterval(function(){
							if($("#g-recaptcha-response").val()!='')
							{
								VerifyReCaptcha($("#g-recaptcha-response").val());
								clearInterval(IntervalID);
							}
						},500);
					});
				</script>
			
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
	</body>
</html>
